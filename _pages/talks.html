---
layout: archive
title: "Talks and presentations"
permalink: /talks/
author_profile: true
---

<!-- <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  #talkmap { height: 600px; margin: 1rem 0; }
</style>

<div id="talkmap"></div> -->

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var talks = [
    {% for post in site.talks %}
      {
        title: {{ post.title | jsonify }},
        location_name: {{ post.location_name | jsonify }},
        lat: {{ post.latitude | default: 'null' }},
        lng: {{ post.longitude | default: 'null' }},
        date: {{ post.date | date: "%Y-%m-%d" | jsonify }}
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  console.log("Talks array:", talks);

  // Initialize map centered on Europe
  var map = L.map('talkmap', { worldCopyJump: false, maxBoundsViscosity: 1.0 }).setView([54, 15], 4);

  // Restrict panning to roughly "Europe + most of the Pacific halves"
  map.setMaxBounds([
    [-60.0, -170.0],   // SW
    [85.0, 170.0]      // NE
  ]);

  // Carto Light tiles, English labels
  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://www.carto.com/">CARTO</a>',
    subdomains: 'abcd',
    maxZoom: 19,
    noWrap: true
  }).addTo(map);

  // Add markers
  var markers = [];
  talks.forEach(function(t) {
    if (t.lat && t.lng) {
      var m = L.marker([t.lat, t.lng]).addTo(map);
      m.bindPopup(
        '<strong>' + t.title + '</strong><br>' +
        (t.location_name ? t.location_name + '<br/>' : '') +
        (t.date ? t.date : '')
      );
      markers.push(m);
    } else {
      console.warn('Missing coords for:', t.title, t.location_name);
    }
  });

  // Fit map to markers
  if (markers.length) {
    var group = L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));
  }
</script>

<hr>

<!-- <h2>All Talks</h2> -->

{% assign talks_by_year = site.talks | group_by_exp:"talk","talk.date | date: '%Y'" | sort: "name" | reverse %}
<ul>
  {% for year in talks_by_year %}
    <li>
      <strong>{{ year.name }}</strong>
      <ul>
        {% assign sorted_talks = year.items | sort: "date" | reverse %}
        {% for post in sorted_talks %}
          <li>
            <em>{{ post.title }}</em>, {{ post.location_name }}, {{ post.date | date: "%B %-d" }}
          </li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>
